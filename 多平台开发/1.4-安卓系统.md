> Create by **fall** on 29 Apr 2025<br/>
> Recently revised in 29 Apr 2025

## 系统权限划分

- 应用权限：读取文件，需要向用户提交申请
- 用户权限：可以删除可访问文件，卸载应用
- root 权限：可以访问任意文件，任意应用

### 分区

- boot 分区：操作系统启动和引导文件，内核，和虚拟内存（分区损坏时，卡在开机第一屏）
- system 分区：整个操作系统以及预装软件，（分区损坏时，卡在开机第二屏）
- data 分区：数据，应用，视频，图片，文档，系统设置
- cache 缓存分区：应用的缓存，删除后，也会重新生成
- recovery 分区：恢复分区

android 7 之后使用 AB 分区

- 系统升级时，使用 A 分区，B 分区自动升级
- 升级完成后，从 B 分区启动，即可完成系统升级

android 11 之后使用 VAB 分区，虚拟的 AB 分区（不需要占用两个系统的磁盘空间）

## fast boot

进入 fastboot

| 系统    | 电源键 | 音量 - | 音量 + | 同时使用数据线连接电脑 |
| ------- | ------ | ------ | ------ | ---------------------- |
| 华为    |        | ✓      |        | ✓                      |
| 小米    | ✓      | ✓      |        |                        |
| oppo    | ✓      | ✓      |        |                        |
| vivo    | ✓      |        | ✓      |                        |
| 1+      | ✓      | ✓      | ✓      |                        |
| meizu   | ✓      | ✓      |        |                        |
| sony    |        |        | ✓      | ✓                      |
| Samsung |        | ✓      | ✓      | ✓                      |
|         |        |        |        |                        |

可以下载 android platform Tools

在目录下可以运行

```powershell
# 查看电脑连接的 android 设备
fastboot devices

```

## ADB

android developer bridge，使用工具来操作手机，比如搞机工具箱，秋之盒

## 刷机

刷机方式大致分为两种

- 线刷：fastboot
- 卡刷：直接把系统放置在手机里，进行刷机

刷机前，需要先打开 OEM 解锁

几乎所有品牌都会对 bootloader 上锁，不解锁，就无法对 boot 分区修改，也就无法 root

root 的过程就是修改 boot 分区，在解锁后，可能永久失去部分模块（三星会熔断 knox，三星安全模块）

推荐 root 的机型：小米、one plus（有详细的文档，以及技术社群）

```powershell
## 手机重启，并进入 recovery
adb reboot recovery
```

TWRP：主要功能包括刷机、备份，救砖。支持更多的可选操作，提供很多脚本的 root 工具

- 对部分应用隐藏权限
- 刷模块

### root 后可以进行哪些操作

一般使用 [Magisk](https://github.com/topjohnwu/Magisk) 对 root 进行操作

另一款开源项目 [kernelsu](https://github.com/tiann/KernelSU)

- 改字体
- V4A 音效，音效驱动
- 性能控制脚本：如[uperf](https://github.com/yc9559/uperf)
- CPU 调度：Scene 为每款应用设置对应的调度（安卓的性能调度是根据系统给应用设置）（STM 工具箱）
- 修改应用分辨率：GLTools 拉高渲染分辨率，强制高刷

### 黑砖补救

连 fast boot 都无法进入

高通：9008

MTK：SP flash

## 参考资料

| 作者   | 链接                                        |
| ------ | ------------------------------------------- |
| 极客湾 | https://www.bilibili.com/video/BV1BY4y1H7Mc |

