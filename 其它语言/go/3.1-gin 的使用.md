> Create by **fall** on 03 Nov 2025<br/>
> Recently revised in 06 Nov 2025

## gin

非官方模块，类似于 node 的 express。

## 请求相关

### query

查询字符串中的数据 `/path?name=fall`

```go
```



### body

请求体中，如果传入的是文本

```go
import (
    "bytes"
    "io/ioutil"
    "github.com/gin-gonic/gin"
)
func Handler(c *gin.Context) {
    // 读取 Body 内容
    bodyBytes, err := ioutil.ReadAll(c.Request.Body)
    if err != nil {
        // 处理错误
        c.JSON(400, gin.H{"error": "Failed to read request body"})
        return
    }
    defer c.Request.Body.Close() // 确保 Body 关闭

    // 将 Body 内容转换为字符串
    bodyString := string(bodyBytes)
    
    // ... 你的处理逻辑
    c.JSON(200, gin.H{"received": bodyString})
}
```

如果传入的是 JSON 格式文件，可以使用

```go
import (
    "github.com/gin-gonic/gin/binding"
    "github.com/gin-gonic/gin"
)
func Handler(c *gin.Context) {
    if err := c.ShouldBindWith(req, binding.JSON); err != nil && err.Error() != "EOF" {
		responses.ClientErrDetail(c, "解析请求体失败", err.Error())
		return false
	}
}

```



### formData

```go
package routes
import (
	"net/http"
	"github.com/gin-gonic/gin"
)
// 一般会 Word，放置在 models 模块下
type Word struct {
	gorm.Model
	Word string `json:"word"`
	Accent string `json:"accent"`
	Translate string `json:"translate"`
	Example string `json:"example"`
}
func AddWord(c *gin.Context) {
	word := new(Word)
	// 读取 formData 数据
	word.Word = c.PostForm("word")
	word.Accent = c.PostForm("accent")
	word.Translate = c.PostForm("translate")
	word.Example = c.PostForm("example")
	Println("receiving data ",word)
}
```

### JSON

```go
// 定义与 JSON 结构对应的 Go 结构体
// 需要作为 json 进行返回时，必须要使用 `json` 进行注解，左侧为变量名，右侧为返回时的替换值
type Person struct {
    Name    string   `json:"name"`           // 字段标签指定 JSON 键名
    Age     int      `json:"age"`
    Email   string   `json:"email,omitempty"` // omitempty 表示如果为空则省略
    Hobbies []string `json:"hobbies"`
}

func AddWord(c *gin.Context) {
	data, err := c.GetRawData()
	if err != nil {
		log.Fatal("获取数据失败", err)
		return
	}
	var person Person
	err2 := json.Unmarshal([]byte(data), &person)
	if err2 != nil {
		log.Fatal("解析 JSON 失败:", err)
	}
}

```

### 返回内容

```go
import (
	"github.com/gin-gonic/gin"
)
func AddWord(c *gin.Context) {
	c.Status(200)
	c.JSON(http.StatusOK, gin.H{
		"status": "success",
		"data":   "创建成功",
	})
}
```



## 工具

读取传入的 json 文件，并且解析

```go
package utils
import (
	"io"
	"github.com/gin-gonic/gin"
)
func ReadFileJSON(c *gin.Context) []byte {
	file, err := c.FormFile("json_file")
	if err != nil {
		c.JSON(400, gin.H{
			"msg":    "请上传 JSON 文件",
			"detail": err.Error(),
		})
	}
	openedFile, err := file.Open()
	if err != nil {
		c.JSON(500, gin.H{
			"msg":    "无法打开的 JSON 文件",
			"detail": err.Error(),
		})
	}
	defer openedFile.Close()
	content, err := io.ReadAll(openedFile)
	if err != nil {
		c.JSON(500, gin.H{
			"msg": "无法读取文件内容",
			"err": err.Error(),
		})
	}
	return content
}
```

## 