> Create by **fall** on 21 Aug 2024<br/>
> Recently revised in 21 Aug 2024

## 使用 prisma

定义 prisma

```ts
// prisma.service.ts
import { Injectable, OnModuleInit } from '@nestjs/common'
import { PrismaClient } from '@prisma/client'
@Injectable()
export class PrismaService extends PrismaClient implements OnModuleInit {
  // optional  如果没有连接，prisma 会在第一次调用数据库时连接
  async onModuleInit () {
    await this.$connect()
  }
}

```

注册

```ts
// app.module.ts
import { Module } from '@nestjs/common'
import { PrismaService } from '@/prisma.service'
@Module({
  // 其它配置
  providers: [PrismaService]
})
export class ReleaseModule {}

```

使用

```ts
// foo.service.ts
@Injectable()
export class ReleaseService {
  constructor (private prisma: PrismaService) {}
  async create (data: any) {
    await this.prisma.releaseItem.create({
      data: {
        ...data
      }
    })
    return {
      code: 200,
      msg: '创建发版文件成功'
    }
  }
}
```

