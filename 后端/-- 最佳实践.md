---
sidebar_position: 3
---

> Create by **fall** on 08 Jan 2025<br/>
> Recently revised in 08 Jan 2025

## 项目结构

先读一遍中文，再之后是英文

### 组件构建解决方案

大型项目，最坏的隐患就是维护一个庞大的，上百个依赖的代码库，在整合新的需求的时候，一个庞然大物必然延缓开发效率。如果将代码拆分成组件，每一个组件拥有各自的依赖，确保每一个组件小而简单。

否则，开发人员在项目过程中会担心自己的内容会影响到其它的模块，部署会更慢，风险更大。业务逻辑没有被分开，自然也很难扩展。

### 分层设计组件

保持 express 在特定的区域，每一个组件都应该包含层级，一个专注的用于接入网络，逻辑，数据的概念







## 错误处理

### 使用 Async-Await or promises 进行异步错误处理

使用回调进行异步错误处理，是让维护变成灾难的最快方式。



## 爬虫

使用 axios 对网页进行请求

使用 cheerio 对 html 进行解析，并获取到想要的资源

使用字节流对文件进行写入

```ts
import axios from 'axios'
import fs from 'fs'
import path from 'path'

function writeFile(urls:string[]){
  const requestList = urls.forEach(url=>{
    axios.get(url,{responseType:'arraybuffer'}).then(res=>{
      const fileName = new Date().getTime()+'.jpg'
      const ws = fs.createWriteStream(path.join(__dirname,'cosplay-imgs'+fileName))
      ws.write(res.data)
    })
  })
}
```



## 参考文章

| 作者                                            | 文章名称                                                     |
| ----------------------------------------------- | ------------------------------------------------------------ |
| [goldbergyoni](https://github.com/goldbergyoni) | [Node.js Best Practices](https://github.com/goldbergyoni/nodebestpractices) |

